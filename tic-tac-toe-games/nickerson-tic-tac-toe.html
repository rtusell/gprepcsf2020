<html>
<head>

	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

	<title>Nickerson Tic-tac-toe</title>
	
	<link rel="stylesheet" type="text/css" href="../style.css">
	
	<script type="text/javascript" src="https://static.codehs.com/gulp/0444eb492be7b35724333daa087b82121c1743cb/chs-js-lib/chs.js"></script>


	<style>
	canvas 
	{
	    border: 1px solid black;
	    display: block;
		margin-left:auto;
		margin-right:auto;
	    vertical-align: top;
	}
	
	pre 
	{
	    border: 1px solid black;
	    display: inline-block;
	    width: 400px;
	    height: 500px;
	    background-color: #F5F5F5;
	}
	</style>

</head>

<body>
	<div class="container">
		<br>
		<br>
		<div class="row">
			<img  class="logo" src = "https://www.gprep.org/uploaded/Website_Redesign_Spring_2016/seal_PMS_282_blue.jpg" width ="200 px">
		</div>
		<br>
		<div class="row">
			<h1 class="text-center">
	            Computer Science Fundamentals
				<br>
				<small>Summer 2020</small>
	        </h1>
		</div>
		<div class="btn-group btn-group-justified">
			<a href="../index.html" class="btn btn-primary btn-lg"> <span class="glyphicon glyphicon-home"></span> Home </a>
			<a href="../helicopter.html" class="btn btn-primary btn-lg"> Helicopter </a>
			<a href="../tic-tac-toe.html" class="btn btn-primary btn-lg">Tic-tac-toe</a>
			<a href="../break-out.html" class="btn btn-primary btn-lg">Breakout</a>
			<a href="../snake.html" class="btn btn-primary btn-lg">Snake</a>
		</div>
		<div class="spacer"></div>
		<canvas 
		width="400"
		height="500"
		class="displaygame"></canvas>
		
		<script>
		window.onload = function() {

			var WIDTH = 400;
			var HEIGHT = 400;
			setSize(WIDTH, HEIGHT);
			
			var WINNING_LINE_WIDTH = 10;
			var WINNING_LINE_COLOR = Color.red;
			
			var GRID_LINE_WIDTH = 3;
			var CIRCLE_RADIUS = getWidth()/6  - getWidth()/25;
			var XO_WIDTH =5;
			
			var dataGrid = new Grid(3, 3);
			var counter=0;
			
			//This program plays Tik-Tac-Toe.
			function start()
			{
				drawGrid();
				mouseClickMethod(handleClick);
				dataGrid.init(0);
			}
			
			function handleClick(e)
			{
			    //Draw Xs and Os
			    var row = getRowForClick(e.getY());
			    var col = getColForClick(e.getX());
			    if (counter%2==0 && counter<9 && dataGrid.get(row, col)==0)
			    {
			        drawX(getColForClick(e.getX()), getRowForClick(e.getY()));
			        counter++;
			    }
			    else if (counter%2!=0 &&counter<9 && dataGrid.get(row, col)==0)
			    {
			        drawO(getColForClick(e.getX()), getRowForClick(e.getY()));
			        counter++;
			    }
			    
			    //Draw Winner Lines
			    if (winnerInCol(0) || winnerInCol(1) || winnerInCol(2))
			    {
			        drawLine(getHeight()/6 + getHeight()/3*col, 0, getHeight()/6 + getHeight()/3*col, getHeight(), WINNING_LINE_WIDTH, WINNING_LINE_COLOR);
			        counter=9;
			    }
			    if (winnerInRow(0) || winnerInRow(1) || winnerInRow(2))
			    {
			        drawLine(0, getWidth()/6 + getWidth()/3 *row, getWidth(), getWidth()/6 + getWidth()/3 *row, WINNING_LINE_WIDTH, WINNING_LINE_COLOR);
			        counter=9;
			    }
			    if (winnerInDownDiagonal())
			    {
			        drawLine(0, 0, getWidth(), getHeight(), WINNING_LINE_WIDTH, WINNING_LINE_COLOR);
			        counter=9;
			    }
			    if (winnerInUpDiagonal())
			    {
			        drawLine(0, getHeight(), getWidth(), 0, WINNING_LINE_WIDTH, WINNING_LINE_COLOR);
			        counter=9;
			    }
			}
			
			function winnerInRow(row)
			{
			    if (dataGrid.get(row, 0) == dataGrid.get(row, 1) && dataGrid.get(row, 1) ==dataGrid.get(row, 2) && dataGrid.get(row, 2) != 0)
			    {
			        return true;
			    }
			}
			
			function winnerInCol(col)
			{
			    if (dataGrid.get(0, col) == dataGrid.get(1, col) && dataGrid.get(1, col) == dataGrid.get(2, col) && dataGrid.get(2, col) != 0)
			    {
			        return true;
			    }
			}
			
			function winnerInDownDiagonal()
			{
			    if (dataGrid.get(0, 0) == dataGrid.get(1, 1) && dataGrid.get(1, 1) == dataGrid.get(2, 2) && dataGrid.get(2, 2) != 0)
			    {
			        return true;
			    }
			}
			
			function winnerInUpDiagonal()
			{
			    if (dataGrid.get(2, 0) == dataGrid.get(1, 1) && dataGrid.get(1, 1) == dataGrid.get(0, 2) && dataGrid.get(0, 2) != 0)
			    {
			        return true;
			    }
			}
			
			//This function registers which row the mouse clicked in.
			function getRowForClick(y)
			{
			    //TopThird
			    if (y<getHeight()/3)
			    {
			        return 0;
			    }
			    //MiddleThird
			    else if (y<getHeight()/3 *2 && y>getHeight()/3)
			    {
			        return 1;
			    }
			    //BottomThird
			    else if (y> getHeight()/3 *2)
			    {
			        return 2;
			    }
			}
			
			//This function registers which col the mouse clicked in.
			function getColForClick(x)
			{
			    //LeftThird
			    if (x<getWidth()/3)
			    {
			       return 0;
			    }
			    //MiddleThird
			    else if (x<getWidth()/3 *2 && x>getWidth()/3)
			    {
			        return 1;
			    }
			    //RightThird
			    else if (x>getWidth()/3 *2)
			    {
			        return 2;
			    } 
			}
			
			//This function draws Xs.
			function drawX(col, row)
			{
			    dataGrid.set(row, col, -1);
			    
			    var x1 = getWidth()/6 - 36 + getWidth()/3 *col;
			    var y1 = getHeight()/6 - 35+ getHeight()/3 *row;
			    var x2 = getWidth()/3 -30 + getWidth()/3 *col;
			    var y2 = getHeight()/3 -30 +getHeight()/3 *row;
			    drawLine(x1, y1, x2, y2, XO_WIDTH, Color.black);
			    
			    x1 = getWidth()/6 +36 + getWidth()/3 *col;
			    y1 = getHeight()/6 -35+getHeight()/3 *row;
			    x2 = getWidth()/6 - 35 + getWidth()/3 *col;
			    y2 = getHeight()/3 -30+getHeight()/3 *row;
			    drawLine(x1, y1, x2, y2, XO_WIDTH, Color.black);
			}
			
			//This function draws Os.
			function drawO(row, col)
			{
			    dataGrid.set(col, row, 1);
			    var circle = new Circle(CIRCLE_RADIUS);
			    circle.setPosition(getWidth()/6 + getWidth()/3 *row, getHeight()/6 + getHeight()/3*col);
			    circle.setColor(Color.white);
			    circle.setBorderColor(Color.black);
			    circle.setBorderWidth(XO_WIDTH);
			    add(circle);
			}
			
			//This function draws the board grid.
			function drawGrid()
			{
			    drawLine(getWidth()/3, 0, getWidth()/3, getHeight(), GRID_LINE_WIDTH, Color.black);
			    drawLine(getWidth()/3 *2, 0, getWidth()/3 *2, getHeight(),GRID_LINE_WIDTH, Color.black);
			    drawLine(0, getHeight()/3, getWidth(), getHeight()/3, GRID_LINE_WIDTH, Color.black);
			    drawLine(0, getHeight()/3 *2, getWidth(), getHeight()/3 *2, GRID_LINE_WIDTH, Color.black);
			}
			
			//This function is used throughout the program to draw lines.
			function drawLine(x1, y1, x2, y2, width, color)
			{
			    var line = new Line(x1, y1, x2, y2);
			    line.setColor(color);
			    line.setLineWidth(width);
			    add(line);
			}

			if (typeof start === 'function') {
			        start();
			}
		};
		</script>
		<br>
		<div class="spacer"></div>
	</div>
	</body>
</html>
